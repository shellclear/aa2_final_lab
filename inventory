load_balancers:
  hosts:
    frontend1.example.com:
  vars:
    load_balancer_packages:
      - haproxy
    firewall_ports:
      - 80/tcp

app_servers:
  hosts:
    app1.example.com:
    app2.example.com:
  vars:
    flask_app_name: resource_hub
    flask_user: flask
    flask_home: /opt
    flask_repo: https://github.com/tonykay/resource_hub.git
    flask_scm_ref: main
    flask_app_lauch_script: /usr/local/bin/launch_resource_hub
    virtualenv_name: "venv-{{ flask_app_name }}"
    virtualenv_home: /opt/virtual_envs
    virtualenv_python: /usr/bin/python3
    app_yum_packages:
      - autoconf
      - automake
      - git
      - gcc
      - libtool
      - python3
      - python3-psycopg2
    pip_dependencies:
      - virtualenv
      - psycopg2-binary==2.8.6
    firewall_ports:
      - 8080/tcp

database_servers:
  hosts:
    appdb1.example.com:
  vars:
    postgres_rhel8_repo_key: "https://download.postgresql.org/pub/repos/yum/RPM-GPG-KEY-PGDG-12"
    postgres_rhel8_repo: "https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm"
    postgres_packages:
      - postgresql12
      - postgresql12-server
      - postgresql12-contrib 
      - postgresql12-libs
    postgres_library: python3-psycopg2
    postgres_12_data_dir: /var/lib/pgsql/12/data
    postgres_12_bin_path: /usr/pgsql-12/bin
    postgres_service: postgresql-12.service
    postgres_port: 5432
    postgres_user: postgres
    postgres_users:
      - name: flask
        password: redhat
        database: flask_db
        state: present
        priv: ALL
    postgres_databases:
      - name: flask_db
        owner: flask
      - name: books_store
        owner: flask
    firewall_ports:
      - "{{ postgres_port }}/tcp"

all:
  vars:
    dns: "192.168.50.115"
    satellite_activationkey: gpte-labs-rhel8
    satellite_org: prod
    internal_domain: "example.com"
